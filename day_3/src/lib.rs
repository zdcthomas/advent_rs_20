fn sample_data() -> Vec<String> {
    vec![
        "..##.......",
        "#...#...#..",
        ".#....#..#.",
        "..#.#...#.#",
        ".#...##..#.",
        "..#.##.....",
        ".#.#.#....#",
        ".#........#",
        "#.##...#...",
        "#...##....#",
        ".#..#...#.#",
    ]
    .into_iter()
    .map(|s| s.to_owned())
    .collect()
}

fn input() -> Vec<String> {
    vec![
        "...#....#.#...##......#.#...##.",
        ".#..#...##..#....##........##..",
        "..##.##...##.#.#....#..#......#",
        "....#....#..#..#.#....#..###...",
        "####.....##.#.##...##..#....#..",
        "#........##...#..###..#.#.#.##.",
        ".......###........##...#...#...",
        "#.#...#..#..#...#...##.##......",
        "..#...........#......##.#.#....",
        "#..#.#......##.#...#..#.#..#...",
        ".#....#....#..#.....#..###..#.#",
        ".##....................#.###.#.",
        "..#......#.#......#..###.......",
        "#.###..##..###....#........#..#",
        ".....#...#.......#.#.#...#....#",
        "....##..#.##..#.##..#.#....#...",
        ".#..#..#......#..##.#.#....##.#",
        ".....#.....#.##...#.#.##.#.....",
        ".#...#..##.....#.........#.#...",
        ".....#........#........#..#..#.",
        "#......##....#..#.#...#...#....",
        "#......#.#.......##.#..#.#.#...",
        "...###...##.#..........#...#...",
        "...#.##...#......#.##....#.#...",
        "#...#.....#........#..#....##.#",
        "##.#....##...##.####.##.......#",
        "..#..#...#.#.......#.##.#......",
        "##.........#.##....#.#...#.....",
        "##..#......#....#.....#...#....",
        "......##.#.#.....#.#.###...#...",
        "##.......#......#.#..#...#.##..",
        "#....#....#..#.#..#.#..........",
        "...#....#.#.#.#.....##.#..#.##.",
        "......#.#.#....#...##.#..#.....",
        "..##..#.##....#...#.....#..#.##",
        ".#...#.#.##..##........#.#...#.",
        "##.##.##....#.#....##.###......",
        "#...........#....##..#......#..",
        "...##..#.....#....#....#.#..##.",
        ".#..#.##..##..#.........#.....#",
        ".##......##.#.#......##....#...",
        ".....##.#....#...#...........##",
        "..#.....#..##...#.#..#.........",
        "...#.####..#.###.....#.....##..",
        ".....#..##..#.###........#.#...",
        "#..#.#.....#.....#...#...#....#",
        ".#...........#..#.........##...",
        "...#.#.#.......#..............#",
        ".##.#..#...#........#.##.#.#.#.",
        "....#....#.......#......#.#....",
        "##.#..##.....##..#...#....#..#.",
        "#.........#.#..###...#....#..#.",
        "....##.###...#........##...#.##",
        ".#...#..##.##...........##...##",
        ".....#.##........#.#.......##..",
        ".....#......#..#..#...#.#...#..",
        ".....#.....#.#..#.###......####",
        "........#.......#...........#..",
        "...#.##..#....######..#.#...#..",
        "#...##...####..##.....##...#...",
        ".#.......#.###..#.##..#..#.#.#.",
        "....#..#....##.....#........#.#",
        ".#..#....##..#........#...#...#",
        "#.#..#.#...##...#..........#.#.",
        "##.####....##....#...##.####...",
        "..##......##....#.....#...#..#.",
        "...#......#..#...#..#.#....#.#.",
        "......#...#....##....#.##......",
        ".##...#.........####..#....#..#",
        "...#..#.#......#.....#.#.#.#...",
        "...........#.......#........##.",
        "#.#....#....#.##.#...#...#.#...",
        "#..#.....#..#..#.#...#........#",
        ".....#.#.##...#............#.##",
        "..#.#.#...#...#..###.#.....#...",
        "....#.....##.......#......#....",
        ".#.#....#.##......##.#.#.....#.",
        ".....#.##.....#.#...#....#....#",
        "...#.......#..#.#.###.#.###....",
        ".#...#..#..#....#...###.#.##...",
        ".#....#........#..........##...",
        "##.#......#..#.#..........#.#..",
        "...#..#.......#.##..###....#.#.",
        ".#.....#..........#..#.........",
        "...##...##.#.......#..#....#...",
        ".....#.##....#.#.#...#.......#.",
        "...#.#..#.#.......#.....##..#..",
        ".#.#.......#.#..........#...#.#",
        "#........#...#....###.#...#....",
        "..##....#.#.#.....###.#.#......",
        "..#.....#.#...#.#.....#.#......",
        ".#.....##......#....##.#.#....#",
        "...##..........#.#####...#..#..",
        "#....#......##.............#...",
        "......#.....#...##..#.#....#..#",
        "..###.#.###.#.##.#.##..#.....#.",
        "#...#....#.#....#..##...#...#.#",
        "...#....#...#.#......#......#..",
        "#......#.....#.#..#........#...",
        "...##...##...##..###...###.#...",
        "#..#...#...#.....#..###...##...",
        ".#.....#.......#....#....##....",
        "......#......##.#.#......#.#...",
        "..#....#.#..........#..#...#..#",
        "###...#..............#.........",
        ".###.##..#.#..#.....#.#.##....#",
        "..#......#.##....##......#....#",
        ".##....###.#..#.#.............#",
        "..##..#..#.#.#....#..##.#..#..#",
        "##.#.....##...#..#...#..#.#.#..",
        ".#.#..............#.#...#......",
        "#....##...#....#..#...#........",
        "...#..#..#.#........#..#..#..##",
        "...##.#.#.#....#.......#....#..",
        ".##.#......#.##........#...##..",
        ".#.##..#.....###..#.#......#..#",
        "#....#..#......#....##...#..#.#",
        "..##....#.##...#..#.##....##..#",
        "#....#..#...#.......#...#......",
        "#.#......#....#.#..............",
        "..##..#..#.#.......#.#.#...##..",
        "...##.##......#..#.##.#.......#",
        ".##.........#............#.#...",
        "........#...#.....#....#....#..",
        "#....##...#........#......##...",
        ".###....#..#.#......#....#.#...",
        "#.#...........#...#....#..#.#.#",
        ".#....##.###...#.##....##..#..#",
        "........#.............#.#...#.#",
        "#.##..#.##....##.......#.......",
        ".#.....#..#.##..##.....#.......",
        "....#.#......#.#.............#.",
        "..#.#.......#...#......##..#...",
        "......##..###....##.#.###..##.#",
        "..#..#.##...#...#....#.##..#..#",
        "#.##...##.##.#.#........#......",
        "...#.#.......##....#.......#...",
        ".#....#.##.#..#.......#.....##.",
        "#..#...##.####..###.....#......",
        "..#...##...#...#.#......#...#.#",
        ".##.##.#...#.....#.##..##......",
        ".#...#.#.##.###..#...#...#.....",
        ".#..##..#....##.##....##....##.",
        "..#...##....#..###........##...",
        ".#..#..#.#....#.#...#.#......#.",
        ".##.....#...#..#..#..#...###...",
        ".#...#....#..#...........###...",
        ".....#...........##.#......#...",
        ".....#....##......##..#.#......",
        ".#.#..#..#...#.#..#..##..#.#...",
        "..#..#####.#..#.#.#.....#.#....",
        "#......#.##.#......#.#......#..",
        ".#...............#..#.#.......#",
        "...##...##.....##.##......#..##",
        "#.......##.#...........#....#..",
        "#...##.#...#.#..#..###...##....",
        "#..##..#..#......#.#...###..#.#",
        ".#.#..###.##..##.....#.........",
        "##.#..##.#..........#.......#..",
        ".###..##....##..#..#...##......",
        "........#..##.##....#....#.....",
        ".....#.#.#........#...#....#.#.",
        "..#..#.#.....#.##....##........",
        "...#....................#....#.",
        "..#....#..###.##......#..#.#.##",
        ".....#.#....#......#...#......#",
        "###...##.......#.#.#.....#....#",
        "..#..###.##..#..#....##.......#",
        "#...#.###..#...#.##..##........",
        "..#..#....#...........##..#....",
        ".#............##..#...##.#..#..",
        ".#.......#.#.........##..#..#..",
        "....#.###.#...##....#.#.##.....",
        "#.......#........#..#.##......#",
        "#.....###....#....#..#....#....",
        "...........#...#........#.....#",
        "..##...#...#.##...##.#.#..#...#",
        "##.##..#.......##..........#..#",
        "............#.....#...#..#....#",
        ".....#.#......#...#..#.#...#..#",
        "............##.##.....##...#..#",
        "##.#..#..#.#......#......#..##.",
        "..#..#.........#...#..#.#.#....",
        "#..#........#.......###.#......",
        "...#.#.#....#......#.#...#.....",
        "#...............#...#......##..",
        "###.#...#......##.....#..##.##.",
        "#.##...##.......###.##.........",
        ".#.#.........#..#.....#........",
        "..##..#............#.....#...##",
        "......###...#.#...#..#...##....",
        "#.........#.#.##.........##....",
        ".#....##....#....##....#.##....",
        ".#...##.#...#.......#...#....##",
        "#................#......##.....",
        "##..#......#.#.........##...##.",
        "...#.#.#...#..#..##..#....#.#..",
        ".##........#.#......##...#..#..",
        "...##....#.#.....##..#.........",
        "........###.#.#....###.##.#....",
        ".............#....###.#..#.#...",
        ".#...........##....#...#.......",
        "#..#.......#.....##..#.........",
        "..#.#..#....##...##.#.......#.#",
        "#.###.#.........#..#.........#.",
        ".......#.........##....##.#..##",
        ".##...###..........#....#.#..##",
        ".#.....#......##..#...#........",
        "##..#..###........#.......#....",
        "........#...#.##...........#.#.",
        ".....#..#..###.............#..#",
        "...######.##.....#...#......#..",
        ".#...#....###...###......#.##..",
        "...##.####.........#...#...##..",
        "..##....#.......#.....#..#.....",
        "#.##....#.#........#.....##....",
        ".....#.#.###...........#...##.#",
        ".............###........#......",
        "...#..#...##.#....#..##.#.....#",
        "....#.#.....#...#......###..##.",
        "........#.......#..#...........",
        "....#.#...#......#.#.....###...",
        "..#.............####.##.....#..",
        "..........#...#.#..............",
        "..#.#...........#.#..##...##..#",
        ".......#...#........#..##....##",
        "#...#.....#.#.##...#.#.#...#..#",
        ".....#..#....#.###.#.....#.#..#",
        "....#.#.#...#.................#",
        "#..#........##.###....#....#...",
        "..##...##..............##....#.",
        "...#.#...#.#...##........#...#.",
        "##..##.#..#.#.#..#.#...#.#.#.##",
        "..#.#..#....#..#.###.........#.",
        "..#.....#..#..#........#.......",
        "...#...#......##...###.....##..",
        "#....#.##.....#.##..##..#..#...",
        "......##..#.#.#..#.###...#...#.",
        ".##.....##............#.#......",
        "..#.#........##....#..#.####.#.",
        ".#....###..#.......#...........",
        "##...........#..#...#.....#.#..",
        ".#..#....#..#....#.#.........#.",
        ".#.###....#.....##.....##......",
        ".#.#.......#.......#.###.#...#.",
        "...###..#..#....#..####.##....#",
        "..........##...#...#...........",
        ".#.....#.#..##..##...##..#.....",
        "##.......#.#...#..###..#..##...",
        "..#.##......###..#........#..##",
        "....###...#..........#.#..#.#..",
        "#..#.#..##.......##....#.#..##.",
        ".#...#...#..#....#...###.......",
        ".##.#.#.#.....#.....#.#.#.....#",
        "...##.#.....#..#.#...#.####.#..",
        "#...##.....####..#.###.##..#.##",
        "..###..##....#####......##.....",
        "###..............#.#..........#",
        "#...##......##....#...#..##..#.",
        ".#..#...#....##.##.....#....##.",
        "...#.#...#..#..#.......#.##....",
        ".#...#..#.......#.##.#..#...#.#",
        ".#..#.##...#...#.............#.",
        ".#.#.#....##..#.#.#.#.#......##",
        "..#....#.#...##.##.#...#.#.#.#.",
        "...#..#..##.........##..#.....#",
        "....#..........#.#.......#.....",
        "........#....#.#..#.....#.#.#..",
        ".#...#.......#..#.##.........#.",
        "##......#.....#...........#.#..",
        "....#....##...#..#####.####...#",
        ".....##....#....#..#.....#..##.",
        ".#...#.#..###....#......#...#..",
        ".#.#.#.#.....##..........#....#",
        "...#.....#.....#..#............",
        "...#.#..#.....#.............#..",
        "......#....#.#.....#.##...#..#.",
        "...#....#.#...##..#....###.....",
        "...#..#............##...##.##..",
        "..#....#..............#.....#..",
        ".#..#.......#.#.##......#.###..",
        "..#...#.........#..#.....#.....",
        "#..........#.....##............",
        "##.#.#.#....##......#..#....#.#",
        ".#..#.....#.#..#.....#..##.....",
        "...#.#.....#..#..#..#.##.###...",
        "...##.#.....#.....#.......#....",
        ".....................##.#...#..",
        "...#.#...#...#...###..#..#.#...",
        "#....##..###.#...##.#......#..#",
        ".##...##..##...##......##.#....",
        "............#.....#.##.#.##.#.#",
        ".#...##.#..........###......#..",
        ".....##.....##....#.#....##..#.",
        "...#....#.....#....#.....#.#...",
        "................##.#...#....##.",
        "#..###.......#......###......#.",
        "###..#.........#.#.#.....#....#",
        "..#.#......#....#.#......##...#",
        "#...#......#.#.#.#..#...#..###.",
        ".#...#..#...##..#...##....###..",
        "#.#.#.#..###................#.#",
        "...#.####....##.#.....#..#.....",
        "#.#...##..#.#...###.#..#...#...",
        "#..####........#.#..#...##..##.",
        "..#..###..#..........##.###...#",
        ".....#..###.#.#....#....##....#",
        ".###..#.#.#....#...##.......##.",
        "#..#..........#...............#",
        ".#.#...#.....#.###..##......##.",
        "#...#...#...##...##.....##..#..",
        ".....##..###...........#.......",
        "........###..##........#..##..#",
        "#....#...##..##..#.#.#.###...#.",
        ".#..#......##.#..#...#.........",
        ".#....#.##.....................",
        "#.##.##...........#.####..#....",
        "......##....#..#.....#.#....#..",
        "....##.#........#.#.#.#.#..#..#",
        ".#..##..##..#.....#...#.#.....#",
        "...#..#.#.....#..#..##....##..#",
        "..#....#.....#........#.....#..",
        "#.#.#..#..#.#..#...###.#.#....#",
    ]
    .into_iter()
    .map(|s| s.to_owned())
    .collect()
}

fn run(input: Vec<String>, rise: usize, run: usize) -> u32 {
    let mut trees = 0;
    let mut x = 0;

    for row in input.into_iter().step_by(rise) {
        let path = row.chars().cycle().nth(x).unwrap();
        if '#' == path {
            trees += 1;
        };

        x += run;
    }
    trees
}

#[cfg(test)]
mod tests {
    use crate::{input, run, sample_data};

    #[test]
    fn it_works() {
        assert_eq!(run(sample_data(), 1, 3), 7);
        assert_eq!(run(input(), 1, 3), 216);

        let result: u64 = vec![
            run(input(), 1, 1),
            run(input(), 1, 3),
            run(input(), 1, 5),
            run(input(), 1, 7),
            run(input(), 2, 1),
        ]
        .into_iter()
        .map(u64::from)
        .product();
        assert_eq!(result, 6708199680);
    }
}
